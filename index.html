<!doctype html>
<html>
<head>
    <title>Cat Clicker Premium</title>

    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type="text/css">

        body{
            display:grid;
            grid-template-columns:  1fr 1fr 1fr;
            grid-template-rows: 200px 600px;
        }

        header{
            grid-column: 1/ -1;
            grid-row: 1 / 1;
            display:flex;
            align-items: center;
            justify-content: center;
        }

        .cat-choices{
            grid-column: 1 / 1 ;
            grid-row: 2 / 2 ;
            display:flex;
            align-items: flex-start;
            justify-content: center;
        }

        .choices{
            display:flex;
            flex-direction: column;
        }

        .cat-section{
            grid-column: 2 / -1 ;
            grid-row: 2 / 2 ;
            display:flex;
            flex-direction: row;
            align-items: flex-start;
            justify-content: center;
        }

        .cat-image{
            width:300px;
            height:300px;
            margin:30px;
        }

        .cat-stats{
            margin:30px;
            width:300px;
            height:300px;
        }

        img{
            width:250px;
            height:250px;
        }

        #cat-links{
            margin-top:0px;
            padding:5px 10px 5px 10px;
        }

        #cat-links >li {
            padding:15px;
            cursor: pointer;
            list-style: none;
        }

    </style>
</head>

<body>

<header>
<h1>Cat Clicker Premium</h1>
</header>

<section class = "cat-choices">
    <div class = "choices">
        <h4>Choose a cat:</h4>
        <ul id = "cat-links">

        </ul>
    </div>
</section>

<section class = "cat-section">
    <div class = "cat-image">
        <img id = "cat-image" src="img/">
    </div>
    <div class = "cat-stats">
        <h4><span id = "cat-name">Chosen Cat</span></h4>
        <p>You have clicked <span id = "click-count">0</span> times so far!</p>
    </div>
</section>


<script>

/* ========= Model  ==================== */

var model = {

    currentCat: null,

    cats: [
        {clickCount:0,
        name: "Larry",
        imgSrc: "img/black-and-white-cat.jpg"
        },
        {clickCount:0,
        name: "Barry",
        imgSrc: "img/cat-on-grass.jpg"
        },
        {clickCount:0,
        name: "Sally",
        imgSrc: "img/calico-cat.jpg"
        },
        {clickCount:0,
        name: "Tolly",
        imgSrc: "img/multi-cat.jpg"
        },
        {clickCount:0,
        name: "Smolly",
        imgSrc: "img/plant-cat.jpg"
        }
    ],
}


var octopus = {

    init:function(){
        //set current cat to first one by default.
        model.currentCat = model.cats[0];

        //init the views
        catListView.init();
        catView.init();

    },
    getCurrentCat: function(){
        return model.currentCat;
    },
    getAllCats: function(){
        return model.cats;
    },
    //set the current cat to the new one passed in.
    setCurrentCat: function(cat){
        model.currentCat = cat;
    },

    counter: function(){
        model.currentCat.clickCount ++;
        catView.render();
    },
};


/* ========= View  ==================== */

var catView = {

    init: function(){
        //get dom elements to change.
        this.catElement = document.getElementById("cat-section");
        this.catNameElement = document.getElementById("cat-name");
        this.catImageElement = document.getElementById("cat-image");
        this.countElement = document.getElementById("click-count");

        this.catImageElement.addEventListener("click",function(e){
            e.preventDefault();
            octopus.counter();
        });

        this.render();
    },

    render: function(){
        //update dom elements
        var currentCat = octopus.getCurrentCat();

        this.countElement.textContent = currentCat.clickCount;
        this.catNameElement.textContent = currentCat.name;
        this.catImageElement.src = currentCat.imgSrc;
    }
};

var catListView = {

    init: function(){
        this.catListElement = document.getElementById("cat-links");
        this.render();
    },

    render: function(){
        //get all the cats
        var cats = octopus.getAllCats();
        this.catListElement.innerHTML = "";

        cats.forEach(cat => {

            var element = document.createElement("li");
            element.textContent = cat.name;

            //set event
            //using closure cat.
            element.addEventListener("click",(function(cat){
                return function(){
                    octopus.setCurrentCat(cat);
                    catView.render();
                };
            })(cat));

            this.catListElement.appendChild(element);

        });

    }

};

//start the octopus going!
octopus.init();


</script>

</body>
</html>